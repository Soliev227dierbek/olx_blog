{% extends 'base.html' %}
{% load static %}

{% block title %}
Главная
{% endblock %}

{% block content %}
<h1>Категории</h1>
<hr>
<div class="card-group">
    {% for category in categories %}
    <div class="card" style="border-radius: 20px 20px 20px 20px; margin: 10px;">
    <h2>{{ category.name }}</h2>
        <ul>
            {% for subcategory in category.subcategories.all %}
                <li>{{ subcategory.name }}</li>
            {% empty %}
                <li>Нет подкатегорий</li>
            {% endfor %}
        </ul>
    </div>
    {% endfor %}
</div>

<div class="card-group">
    {% for product in products %}
    <div class="card" style="border-radius: 20px 20px 20px 20px; margin: 10px;">
        {% if product.image %}
        <img src="{{product.image.url}}" class="card-img-top" alt="...">
        {% else %}
        <img src="{% static 'img/9.png' %}" alt="...">
        {% endif %}
        <div class="card-body">
            <hr>
            <h5 class="card-title">{{ product.title }}</h5>
            <p class="card-text">{{ product.text | slice:'0:50'}}...</p>
            <h5>Цена:</h5><a href="{% url 'product_detail' id=product.id %}" style="text-decoration: none;"><p class="card-price">{{ product.price }} сум</p></a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}